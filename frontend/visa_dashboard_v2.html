<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Visa AI Dashboard</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf3 100%);
      min-height: 100vh;
    }

    header {
      background: linear-gradient(135deg, #1a1f71, #4f5bd5);
      color: white;
      padding: 25px 30px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .header-logo {
      width: 90px;
      filter: brightness(0) invert(1);
    }

    .user-info h2 {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 4px;
      cursor: pointer;
      transition: opacity 0.3s;
    }

    .user-info h2:hover {
      opacity: 0.8;
    }

    .user-info p {
      font-size: 13px;
      opacity: 0.9;
    }

    .header-actions {
      display: flex;
      gap: 10px;
    }

    .header-btn {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
    }

    .header-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 30px 20px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 25px;
    }

    .card {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
    }

    .card h3 {
      color: #1a1f71;
      font-size: 22px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .card-full {
      grid-column: 1 / -1;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-top: 15px;
    }

    .stat-box {
      background: linear-gradient(135deg, #f0f4ff, #e8f0fe);
      padding: 20px;
      border-radius: 12px;
      text-align: center;
    }

    .stat-value {
      font-size: 32px;
      font-weight: bold;
      color: #1a1f71;
      margin-bottom: 5px;
    }

    .stat-label {
      font-size: 14px;
      color: #64748b;
    }

    .card-selector {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }

    .card-option {
      flex: 1;
      padding: 15px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
    }

    .card-option:hover {
      border-color: #4f5bd5;
    }

    .card-option.selected {
      border-color: #1a1f71;
      background: linear-gradient(135deg, #f0f4ff, #e8f0fe);
    }

    .benefits-list {
      list-style: none;
      margin-top: 15px;
    }

    .benefit-item {
      padding: 15px;
      background: #f8fafc;
      border-radius: 10px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s;
    }

    .benefit-item:hover {
      background: #e8f0fe;
      transform: translateX(4px);
    }

    .status-badge {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }

    .status-active {
      background: #d1fae5;
      color: #065f46;
    }

    .status-expired {
      background: #fee2e2;
      color: #991b1b;
    }

    .action-buttons {
      display: grid;
      gap: 10px;
      margin-top: 15px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #1a1f71, #4f5bd5);
      color: white;
      padding: 14px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(79, 91, 213, 0.4);
    }

    .btn-secondary {
      background: white;
      color: #1a1f71;
      padding: 14px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-secondary:hover {
      border-color: #4f5bd5;
      background: #f8fafc;
    }

    input, select, textarea {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 15px;
      transition: all 0.3s;
      margin-bottom: 15px;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #4f5bd5;
      box-shadow: 0 0 0 4px rgba(79, 91, 213, 0.1);
    }

    .notification {
      padding: 15px;
      border-radius: 10px;
      margin-top: 15px;
      display: none;
      animation: slideDown 0.3s ease-out;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .notification.success {
      background: #d1fae5;
      color: #065f46;
      border: 1px solid #86efac;
    }

    .notification.info {
      background: #dbeafe;
      color: #1e40af;
      border: 1px solid #93c5fd;
    }

    .transaction-list {
      margin-top: 15px;
    }

    .transaction-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      background: #f8fafc;
      border-radius: 8px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .transaction-item:hover {
      background: #e8f0fe;
      transform: translateX(4px);
    }

    .transaction-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      margin-right: 12px;
    }

    .transaction-details {
      flex: 1;
    }

    .transaction-name {
      font-weight: 600;
      color: #1e293b;
      font-size: 14px;
    }

    .transaction-date {
      font-size: 12px;
      color: #64748b;
    }

    .transaction-amount {
      font-weight: 600;
      font-size: 16px;
    }

    .amount-positive {
      color: #059669;
    }

    .amount-negative {
      color: #dc2626;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      animation: fadeIn 0.3s ease-out;
    }

    .modal.active {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: white;
      border-radius: 20px;
      padding: 30px;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      animation: slideUp 0.3s ease-out;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 28px;
      cursor: pointer;
      color: #64748b;
    }

    .modal-close:hover {
      color: #1e293b;
    }

    .detail-section {
      margin: 20px 0;
      padding: 20px;
      background: #f8fafc;
      border-radius: 12px;
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid #e2e8f0;
    }

    .detail-row:last-child {
      border-bottom: none;
    }

    .detail-label {
      color: #64748b;
      font-size: 14px;
    }

    .detail-value {
      font-weight: 600;
      color: #1e293b;
    }

    .chatbot-mini {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 1000;
    }

    .chat-toggle {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #1a1f71, #4f5bd5);
      color: white;
      border: none;
      font-size: 28px;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .chat-toggle:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 30px rgba(79, 91, 213, 0.5);
    }

    .chat-window {
      position: absolute;
      bottom: 80px;
      right: 0;
      width: 380px;
      height: 500px;
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      display: none;
      flex-direction: column;
      overflow: hidden;
      animation: slideUp 0.3s ease-out;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .chat-window.open {
      display: flex;
    }

    .chat-header {
      background: linear-gradient(135deg, #1a1f71, #4f5bd5);
      color: white;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .chat-header h4 {
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .chat-close {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      opacity: 0.8;
    }

    .chat-close:hover {
      opacity: 1;
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      background: #f8fafc;
    }

    .chat-message {
      margin-bottom: 15px;
      animation: fadeIn 0.3s ease-out;
    }

    .chat-message.user {
      display: flex;
      justify-content: flex-end;
    }

    .chat-message.bot {
      display: flex;
      justify-content: flex-start;
    }

    .message-bubble {
      max-width: 75%;
      padding: 12px 16px;
      border-radius: 16px;
      font-size: 14px;
      line-height: 1.5;
    }

    .chat-message.user .message-bubble {
      background: linear-gradient(135deg, #1a1f71, #4f5bd5);
      color: white;
      border-bottom-right-radius: 4px;
    }

    .chat-message.bot .message-bubble {
      background: white;
      color: #1e293b;
      border: 1px solid #e2e8f0;
      border-bottom-left-radius: 4px;
    }

    .chat-input-area {
      padding: 15px;
      background: white;
      border-top: 1px solid #e2e8f0;
      display: flex;
      gap: 10px;
    }

    .chat-input {
      flex: 1;
      padding: 12px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 14px;
      margin-bottom: 0;
    }

    .chat-send {
      background: linear-gradient(135deg, #1a1f71, #4f5bd5);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
    }

    .typing-indicator {
      display: inline-flex;
      gap: 4px;
      padding: 12px;
    }

    .typing-indicator span {
      width: 8px;
      height: 8px;
      background: #94a3b8;
      border-radius: 50%;
      animation: bounce 1.4s infinite ease-in-out;
    }

    .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
    .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }

    @keyframes bounce {
      0%, 80%, 100% { transform: scale(0); }
      40% { transform: scale(1); }
    }

    .quick-replies {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .quick-reply-btn {
      background: white;
      border: 1px solid #e2e8f0;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .quick-reply-btn:hover {
      background: #e8f0fe;
      border-color: #4f5bd5;
    }

    .hidden {
      display: none;
    }

    @media (max-width: 1200px) {
      .container {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .container {
        grid-template-columns: 1fr;
      }
      
      .chat-window {
        width: 90vw;
        right: 5vw;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

<header>
  <div class="header-left">
    <img src="https://upload.wikimedia.org/wikipedia/commons/4/41/Visa_Logo.png" alt="Visa" class="header-logo">
    <div class="user-info">
      <h2 id="userName" onclick="goToDashboard()">Hello Guest üëã</h2>
      <p id="custId">Customer ID: VISA123456</p>
      <p id="userProf">Profession: Software Engineer</p>
    </div>
  </div>
  <div class="header-actions">
    <button class="header-btn" onclick="showProfile()">üë§ Profile</button>
    <button class="header-btn" onclick="logout()">üö™ Logout</button>
  </div>
</header>

<div class="container" id="mainDashboard">
  
  <!-- Account Overview -->
  <div class="card">
    <h3>üí∞ Account Overview</h3>
    <div class="stats-grid">
      <div class="stat-box">
        <div class="stat-value">‚Çπ45,230</div>
        <div class="stat-label">Available Balance</div>
      </div>
      <div class="stat-box">
        <div class="stat-value">‚Çπ2,150</div>
        <div class="stat-label">Rewards Earned</div>
      </div>
    </div>
    <div class="action-buttons">
      <button class="btn-primary" onclick="showTransferMoney()">üí∏ Transfer Money</button>
      <button class="btn-secondary" onclick="showStatements()">üìÑ View Statements</button>
    </div>
  </div>

  <!-- Card Benefits with Upgrade Alert -->
  <div class="card">
    <h3>üí≥ Your Card & Benefits</h3>
    
    <!-- Upgrade Suggestion Banner -->
    <div id="upgradeAlert" class="hidden" style="padding: 15px; background: linear-gradient(135deg, #fef3c7, #fde68a); border-radius: 12px; margin-bottom: 15px; border: 2px solid #f59e0b;">
      <strong style="color: #78350f; display: flex; align-items: center; gap: 8px;">
        <span style="font-size: 20px;">‚ö°</span>
        <span id="upgradeMessage">Upgrade Recommended!</span>
      </strong>
      <p style="font-size: 13px; color: #78350f; margin-top: 8px;" id="upgradeReason"></p>
      <button class="btn-primary" style="margin-top: 10px; width: 100%; padding: 10px;" onclick="showUpgradeOptions()">
        üöÄ Explore Upgrade Options
      </button>
    </div>
    
    <div class="card-selector">
      <div class="card-option selected" id="currentCard" onclick="showCardDetails()">
        <div style="font-size: 28px; margin-bottom: 8px;" id="cardIcon">‚≠ê</div>
        <strong id="cardName">Visa Premium</strong><br>
        <span style="font-size: 12px; color: #64748b;" id="cardNumber">****9999</span>
      </div>
    </div>
    
    <div style="padding: 12px; background: #f0f4ff; border-radius: 10px; margin: 15px 0;">
      <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
        <span style="font-size: 13px; color: #64748b;">Rewards Rate</span>
        <strong style="color: #1a1f71;" id="rewardsRate">2% Cashback</strong>
      </div>
      <div style="display: flex; justify-content: space-between;">
        <span style="font-size: 13px; color: #64748b;">Credit Limit</span>
        <strong style="color: #1a1f71;" id="creditLimit">‚Çπ5,00,000</strong>
      </div>
    </div>
    
    <h4 style="margin: 15px 0 10px 0; color: #1a1f71; font-size: 16px;">
      üéÅ Your Benefits (Profession-Based)
    </h4>
    <ul class="benefits-list" id="benefitsList">
      <!-- Benefits will be populated dynamically -->
    </ul>
    
    <button class="btn-secondary" style="margin-top: 10px; width: 100%;" onclick="compareCards()">
      üìä Compare All Cards
    </button>
  </div>

  <!-- Quick Bill Payments -->
  <div class="card">
    <h3>‚ö° Quick Payments</h3>
    <select id="billType">
      <option value="mobile">üì± Mobile Recharge</option>
      <option value="electricity">‚ö° Electricity Bill</option>
      <option value="internet">üåê Internet/Broadband</option>
      <option value="gas">üî• Gas/LPG</option>
      <option value="water">üíß Water Bill</option>
      <option value="dth">üì∫ DTH Recharge</option>
    </select>
    <input type="number" id="billAmount" placeholder="Enter amount (‚Çπ)">
    <button class="btn-primary" onclick="payBill()">üí≥ Pay Now</button>
    <div class="notification success" id="billNotif"></div>
  </div>

  <!-- Recent Transactions -->
  <div class="card card-full">
    <h3>üìä Recent Transactions</h3>
    <div class="transaction-list" id="transactionList">
      <div class="transaction-item" onclick="showTransactionDetail(1)">
        <div style="display: flex; align-items: center;">
          <div class="transaction-icon" style="background: #dbeafe;">üõí</div>
          <div class="transaction-details">
            <div class="transaction-name">Amazon Shopping</div>
            <div class="transaction-date">Jan 4, 2026 ‚Ä¢ 3:45 PM</div>
          </div>
        </div>
        <div class="transaction-amount amount-negative">-‚Çπ2,450</div>
      </div>
      <div class="transaction-item" onclick="showTransactionDetail(2)">
        <div style="display: flex; align-items: center;">
          <div class="transaction-icon" style="background: #d1fae5;">üí∞</div>
          <div class="transaction-details">
            <div class="transaction-name">Salary Credit</div>
            <div class="transaction-date">Jan 1, 2026 ‚Ä¢ 9:00 AM</div>
          </div>
        </div>
        <div class="transaction-amount amount-positive">+‚Çπ50,000</div>
      </div>
      <div class="transaction-item" onclick="showTransactionDetail(3)">
        <div style="display: flex; align-items: center;">
          <div class="transaction-icon" style="background: #fef3c7;">üçï</div>
          <div class="transaction-details">
            <div class="transaction-name">Domino's Pizza</div>
            <div class="transaction-date">Dec 31, 2025 ‚Ä¢ 8:30 PM</div>
          </div>
        </div>
        <div class="transaction-amount amount-negative">-‚Çπ850</div>
      </div>
      <div class="transaction-item" onclick="showTransactionDetail(4)">
        <div style="display: flex; align-items: center;">
          <div class="transaction-icon" style="background: #fecaca;">‚ö°</div>
          <div class="transaction-details">
            <div class="transaction-name">Electricity Bill</div>
            <div class="transaction-date">Dec 30, 2025 ‚Ä¢ 2:15 PM</div>
          </div>
        </div>
        <div class="transaction-amount amount-negative">-‚Çπ1,200</div>
      </div>
    </div>
  </div>

  <!-- Offers & Rewards -->
  <div class="card">
    <h3>üéÅ Special Offers</h3>
    <div style="padding: 15px; background: linear-gradient(135deg, #f0f4ff, #e8f0fe); border-radius: 12px; margin-bottom: 12px; cursor: pointer;" onclick="viewOfferDetail('newyear')">
      <strong style="color: #1a1f71;">üéâ New Year Bonus!</strong>
      <p style="font-size: 14px; color: #64748b; margin-top: 5px;">Get 2X rewards on all transactions this month</p>
    </div>
    <div style="padding: 15px; background: linear-gradient(135deg, #fef3c7, #fde68a); border-radius: 12px; margin-bottom: 12px; cursor: pointer;" onclick="viewOfferDetail('shopping')">
      <strong style="color: #78350f;">üõçÔ∏è Shopping Spree</strong>
      <p style="font-size: 14px; color: #78350f; margin-top: 5px;">15% cashback on fashion & electronics</p>
    </div>
    <button class="btn-secondary" onclick="viewAllOffers()">View All Offers</button>
  </div>

  <!-- Investment Options -->
  <div class="card">
    <h3>üìà Investments</h3>
    <div class="stats-grid">
      <div class="stat-box">
        <div class="stat-value">‚Çπ1.2L</div>
        <div class="stat-label">Total Invested</div>
      </div>
      <div class="stat-box">
        <div class="stat-value" style="color: #059669;">+12%</div>
        <div class="stat-label">Returns (YTD)</div>
      </div>
    </div>
    <div class="action-buttons">
      <button class="btn-primary" onclick="exploreInvestments()">üéØ Explore Options</button>
    </div>
  </div>

  <!-- Support & Help -->
  <div class="card">
    <h3>üÜò Quick Help</h3>
    <div class="action-buttons">
      <button class="btn-secondary" onclick="blockCard()">üîí Block Card</button>
      <button class="btn-secondary" onclick="reportFraud()">‚ö†Ô∏è Report Fraud</button>
      <button class="btn-secondary" onclick="customerSupport()">üìû Call Support</button>
      <button class="btn-primary" onclick="openChat()">üí¨ Chat with AI</button>
    </div>
  </div>

</div>

<!-- Transaction Detail Modal -->
<div class="modal" id="transactionModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Transaction Details</h2>
      <button class="modal-close" onclick="closeModal('transactionModal')">√ó</button>
    </div>
    <div style="text-align: center; margin: 20px 0;">
      <span id="transactionIcon" style="font-size: 60px;">üõí</span>
      <h3 id="transactionName" style="margin-top: 15px;">Amazon Shopping</h3>
      <div id="transactionAmountLarge" style="font-size: 36px; font-weight: bold; color: #dc2626; margin-top: 10px;">-‚Çπ2,450</div>
    </div>
    <div class="detail-section">
      <div class="detail-row">
        <span class="detail-label">Status</span>
        <span class="detail-value" style="color: #059669;">Completed</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Date & Time</span>
        <span class="detail-value" id="transactionDateTime">Jan 4, 2026 at 3:45 PM</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Category</span>
        <span class="detail-value" id="transactionCategory">Shopping</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Merchant</span>
        <span class="detail-value" id="transactionMerchant">Amazon India</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Location</span>
        <span class="detail-value" id="transactionLocation">Online</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Transaction ID</span>
        <span class="detail-value" id="transactionId" style="font-size: 12px;">TXN1234567890</span>
      </div>
    </div>
    <div class="action-buttons">
      <button class="btn-primary" onclick="downloadReceipt()">üìÑ Download Receipt</button>
      <button class="btn-secondary" onclick="reportIssue()">‚ö†Ô∏è Report Issue</button>
    </div>
  </div>
</div>

<!-- Card Comparison Modal -->
<div class="modal" id="compareModal">
  <div class="modal-content" style="max-width: 900px;">
    <div class="modal-header">
      <h2>üìä Compare Visa Cards</h2>
      <button class="modal-close" onclick="closeModal('compareModal')">√ó</button>
    </div>
    <div id="comparisonContent" style="overflow-x: auto;">
      <!-- Comparison table will be populated here -->
    </div>
  </div>
</div>

<!-- Upgrade Options Modal -->
<div class="modal" id="upgradeModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>üöÄ Upgrade Your Card</h2>
      <button class="modal-close" onclick="closeModal('upgradeModal')">√ó</button>
    </div>
    <div id="upgradeContent">
      <!-- Upgrade options will be populated here -->
    </div>
  </div>
</div>

<!-- Mini Chatbot -->
<div class="chatbot-mini">
  <button class="chat-toggle" onclick="toggleChat()" id="chatToggle">ü§ñ</button>
  
  <div class="chat-window" id="chatWindow">
    <div class="chat-header">
      <h4>ü§ñ Visa AI Assistant</h4>
      <button class="chat-close" onclick="toggleChat()">√ó</button>
    </div>
    
    <div class="chat-messages" id="chatMessages">
      <div class="chat-message bot">
        <div class="message-bubble">
          Hi! üëã I'm your Visa AI Assistant. How can I help you today?
          <div class="quick-replies">
            <button class="quick-reply-btn" onclick="askQuestion('Show my benefits')">Benefits</button>
            <button class="quick-reply-btn" onclick="askQuestion('Transaction history')">Transactions</button>
            <button class="quick-reply-btn" onclick="askQuestion('Upgrade my card')">Upgrades</button>
            <button class="quick-reply-btn" onclick="askQuestion('Offers for me')">Offers</button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="chat-input-area">
      <input type="text" class="chat-input" id="chatInput" placeholder="Type your message..." onkeypress="if(event.key==='Enter') sendChatMessage()">
      <button class="chat-send" onclick="sendChatMessage()">Send</button>
    </div>
  </div>
</div>

<script>
// User data

let currentUser = {
  name: "User!",
  custId: "VISA482916",
  profession: "Software Engineer",
  balance: 45230,
  rewards: 2150,
  cardTier: "premium",
  monthlySpend: 35000
};

// Card tier definitions with profession-based benefits
const cardTiers = {
  student: {
    name: "Visa Student Card",
    icon: "üéì",
    color: "#10b981",
    annualFee: 0,
    benefits: {
      general: ["No annual fee", "Basic fraud protection", "Online shopping discounts"],
      "Student": ["10% off on educational platforms", "Free Netflix for 3 months", "Bookstore cashback 5%"],
      "Software Engineer": ["Basic tech store discounts", "Online course discounts"],
      "Doctor": ["Medical journal subscriptions discount"],
      "Business Owner": ["Business tool trials"],
      "Teacher": ["Educational resource discounts"]
    },
    rewardsRate: 0.5,
    limit: 50000
  },
  classic: {
    name: "Visa Classic Card",
    icon: "üí≥",
    color: "#3b82f6",
    annualFee: 500,
    benefits: {
      general: ["2% cashback on all purchases", "Travel insurance up to ‚Çπ1L", "Fuel surcharge waiver"],
      "Student": ["Education loan benefits", "Campus event discounts"],
      "Software Engineer": ["Tech conference discounts", "GitHub Pro free", "Cloud credits ‚Çπ5000"],
      "Doctor": ["Medical equipment discounts", "CME event discounts"],
      "Business Owner": ["Business accounting tools", "Co-working space discounts"],
      "Teacher": ["School supplies cashback", "Professional development courses"]
    },
    rewardsRate: 1,
    limit: 200000
  },
  premium: {
    name: "Visa Premium Card",
    icon: "‚≠ê",
    color: "#8b5cf6",
    annualFee: 2500,
    benefits: {
      general: ["5% cashback on dining", "4 airport lounge access/quarter", "Movie tickets BOGO monthly"],
      "Student": ["Internship platform premium", "Study abroad assistance"],
      "Software Engineer": ["AWS/Azure credits ‚Çπ20000", "DevOps tool subscriptions", "Tech gadget insurance"],
      "Doctor": ["Medical conference sponsorship", "Pharma cashback 10%", "Health insurance premium discount"],
      "Business Owner": ["Business travel benefits", "Vendor payment discounts", "CRM tool subscriptions"],
      "Teacher": ["Professional certification support", "Classroom tech discounts", "Educational tour benefits"]
    },
    rewardsRate: 2,
    limit: 500000
  },
  platinum: {
    name: "Visa Platinum Card",
    icon: "üíé",
    color: "#ec4899",
    annualFee: 5000,
    benefits: {
      general: ["10% dining cashback", "Unlimited lounge access", "Concierge service 24/7"],
      "Student": ["Premium study abroad support", "Scholarship assistance"],
      "Software Engineer": ["Exclusive tech events access", "‚Çπ50000 cloud credits", "Premium IDE licenses", "Tech gadget upgrade program"],
      "Doctor": ["International medical conference sponsorship", "Premium medical journal access", "Equipment financing options"],
      "Business Owner": ["Business class travel", "Vendor financing", "Priority banking", "Financial advisory services"],
      "Teacher": ["International teaching opportunities", "Premium ed-tech tools", "Conference sponsorships"]
    },
    rewardsRate: 3,
    limit: 1000000
  },
  signature: {
    name: "Visa Signature Card",
    icon: "üëë",
    color: "#f59e0b",
    annualFee: 10000,
    benefits: {
      general: ["15% cashback on all categories", "Golf course access", "Personal shopper service"],
      "Student": ["Full scholarship consultation", "Global university network"],
      "Software Engineer": ["Startup funding connections", "‚Çπ100000 cloud credits annually", "Executive coaching", "Patent filing support"],
      "Doctor": ["Medical research grants", "Global hospital partnerships", "Premium malpractice insurance"],
      "Business Owner": ["VC network access", "Business expansion loans", "M&A advisory", "IPO consultation"],
      "Teacher": ["Educational leadership programs", "School establishment support", "Global teaching fellowships"]
    },
    rewardsRate: 5,
    limit: 5000000
  }
};

// Profession recommendations
const professionRecommendations = {
  "Student": {
    idealCard: "student",
    upgradeCard: "classic",
    spendThreshold: 15000
  },
  "Software Engineer": {
    idealCard: "premium",
    upgradeCard: "platinum",
    spendThreshold: 40000
  },
  "Doctor": {
    idealCard: "platinum",
    upgradeCard: "signature",
    spendThreshold: 60000
  },
  "Business Owner": {
    idealCard: "platinum",
    upgradeCard: "signature",
    spendThreshold: 80000
  },
  "Teacher": {
    idealCard: "classic",
    upgradeCard: "premium",
    spendThreshold: 25000
  }
};

// Transaction data
const transactions = {
  1: {
    icon: 'üõí',
    name: 'Amazon Shopping',
    date: 'Jan 4, 2026',
    time: '3:45 PM',
    amount: -2450,
    category: 'Shopping',
    merchant: 'Amazon India',
    location: 'Online',
    status: 'Completed'
  },
  2: {
    icon: 'üí∞',
    name: 'Salary Credit',
    date: 'Jan 1, 2026',
    time: '9:00 AM',
    amount: 50000,
    category: 'Income',
    merchant: 'Tech Corp Pvt Ltd',
    location: 'Direct Deposit',
    status: 'Completed'
  },
  3: {
    icon: 'üçï',
    name: "Domino's Pizza",
    date: 'Dec 31, 2025',
    time: '8:30 PM',
    amount: -850,
    category: 'Food',
    merchant: "Domino's - MG Road",
    location: 'Bangalore, KA',
    status: 'Completed'
  },
  4: {
    icon: '‚ö°',
    name: 'Electricity Bill',
    date: 'Dec 30, 2025',
    time: '2:15 PM',
    amount: -1200,
    category: 'Utilities',
    merchant: 'BESCOM',
    location: 'Bill Payment',
    status: 'Completed'
  }
};

// Update header
document.getElementById("userName").textContent = `Hello ${currentUser.name} üëã`;
document.getElementById("custId").textContent = `Customer ID: ${currentUser.custId}`;
document.getElementById("userProf").textContent = `Profession: ${currentUser.profession}`;

// Initialize dashboard
initializeDashboard();

function initializeDashboard() {
  updateCardDisplay();
  checkUpgradeEligibility();
  populateBenefits();
}

function updateCardDisplay() {
  const card = cardTiers[currentUser.cardTier];
  document.getElementById('cardIcon').textContent = card.icon;
  document.getElementById('cardName').textContent = card.name;
  document.getElementById('rewardsRate').textContent = `${card.rewardsRate}% Cashback`;
  document.getElementById('creditLimit').textContent = `‚Çπ${card.limit.toLocaleString()}`;
}

function populateBenefits() {
  const card = cardTiers[currentUser.cardTier];
  const benefitsList = document.getElementById('benefitsList');
  benefitsList.innerHTML = '';
  
  const professionBenefits = card.benefits[currentUser.profession] || card.benefits.general;
  
  professionBenefits.forEach((benefit, index) => {
    const li = document.createElement('li');
    li.className = 'benefit-item';
    li.onclick = () => showBenefitDetail(benefit);
    li.innerHTML = `
      <div>
        <span style="font-size: 16px; margin-right: 10px;">‚úì</span>
        <strong style="font-size: 14px;">${benefit}</strong>
      </div>
      <span class="status-badge status-active" style="font-size: 11px;">ACTIVE</span>
    `;
    benefitsList.appendChild(li);
  });
}

function checkUpgradeEligibility() {
  const recommendation = professionRecommendations[currentUser.profession];
  const currentTierIndex = Object.keys(cardTiers).indexOf(currentUser.cardTier);
  const recommendedTierIndex = Object.keys(cardTiers).indexOf(recommendation.idealCard);
  const upgradeTierIndex = Object.keys(cardTiers).indexOf(recommendation.upgradeCard);
  
  const upgradeAlert = document.getElementById('upgradeAlert');
  const upgradeMessage = document.getElementById('upgradeMessage');
  const upgradeReason = document.getElementById('upgradeReason');
  
  if (currentTierIndex < recommendedTierIndex) {
    upgradeAlert.classList.remove('hidden');
    upgradeMessage.textContent = `${currentUser.profession}s typically use ${cardTiers[recommendation.idealCard].name}`;
    upgradeReason.textContent = `You're currently using ${cardTiers[currentUser.cardTier].name}. Upgrade to unlock profession-specific benefits like exclusive tech credits, premium tools, and enhanced rewards!`;
  }
  else if (currentUser.monthlySpend > recommendation.spendThreshold && currentTierIndex < upgradeTierIndex) {
    upgradeAlert.classList.remove('hidden');
    upgradeMessage.textContent = `Based on your spending pattern, you qualify for ${cardTiers[recommendation.upgradeCard].name}!`;
    upgradeReason.textContent = `Your monthly spend of ‚Çπ${currentUser.monthlySpend.toLocaleString()} exceeds ‚Çπ${recommendation.spendThreshold.toLocaleString()}. Upgrade to earn ${cardTiers[recommendation.upgradeCard].rewardsRate}x more rewards!`;
  }
  else if (currentUser.cardTier === 'student' && currentUser.profession !== 'Student') {
    upgradeAlert.classList.remove('hidden');
    upgradeMessage.textContent = 'Student Card detected - Time to upgrade!';
    upgradeReason.textContent = `As a ${currentUser.profession}, you should upgrade to unlock professional benefits and higher credit limits. Start with ${cardTiers.classic.name} for better rewards!`;
  }
  else {
    upgradeAlert.classList.add('hidden');
  }
}

function showCardDetails() {
  const card = cardTiers[currentUser.cardTier];
  alert(`${card.name}\n\nüí∞ Annual Fee: ‚Çπ${card.annualFee}\nüéÅ Rewards: ${card.rewardsRate}% on purchases\nüí≥ Credit Limit: ‚Çπ${card.limit.toLocaleString()}\n\nBenefits tailored for ${currentUser.profession}s!`);
}

function compareCards() {
  const modal = document.getElementById('compareModal');
  const content = document.getElementById('comparisonContent');
  
  let html = '<div style="overflow-x: auto;"><table style="width: 100%; border-collapse: collapse; font-size: 13px;">';
  html += '<thead><tr style="background: #1a1f71; color: white;"><th style="padding: 12px; text-align: left;">Feature</th>';
  
  Object.keys(cardTiers).forEach(tier => {
    const card = cardTiers[tier];
    const isCurrent = tier === currentUser.cardTier;
    html += `<th style="padding: 12px; text-align: center; ${isCurrent ? 'background: #4f5bd5;' : ''}">${card.icon} ${card.name}${isCurrent ? ' (Current)' : ''}</th>`;
  });
  
  html += '</tr></thead><tbody>';
  
  html += '<tr style="border-bottom: 1px solid #e2e8f0;"><td style="padding: 12px; font-weight: 600;">Annual Fee</td>';
  Object.keys(cardTiers).forEach(tier => {
    html += `<td style="padding: 12px; text-align: center;">‚Çπ${cardTiers[tier].annualFee}</td>`;
  });
  html += '</tr>';
  
  html += '<tr style="border-bottom: 1px solid #e2e8f0; background: #f8fafc;"><td style="padding: 12px; font-weight: 600;">Rewards Rate</td>';
  Object.keys(cardTiers).forEach(tier => {
    html += `<td style="padding: 12px; text-align: center; color: #059669; font-weight: 600;">${cardTiers[tier].rewardsRate}%</td>`;
  });
  html += '</tr>';
  
  html += '<tr style="border-bottom: 1px solid #e2e8f0;"><td style="padding: 12px; font-weight: 600;">Credit Limit</td>';
  Object.keys(cardTiers).forEach(tier => {
    html += `<td style="padding: 12px; text-align: center;">‚Çπ${cardTiers[tier].limit.toLocaleString()}</td>`;
  });
  html += '</tr>';
  
  html += `<tr style="border-bottom: 1px solid #e2e8f0; background: #f8fafc;"><td style="padding: 12px; font-weight: 600;">${currentUser.profession} Benefits</td>`;
  Object.keys(cardTiers).forEach(tier => {
    const benefits = cardTiers[tier].benefits[currentUser.profession] || cardTiers[tier].benefits.general;
    html += `<td style="padding: 12px; text-align: center; font-size: 11px;">${benefits.slice(0, 2).join(', ')}...</td>`;
  });
  html += '</tr>';
  
  html += '</tbody></table></div>';
  
  html += '<div style="margin-top: 20px; padding: 15px; background: #f0f4ff; border-radius: 10px;">';
  html += '<strong style="color: #1a1f71;">üí° Recommendation:</strong> ';
  const rec = professionRecommendations[currentUser.profession];
  html += `For ${currentUser.profession}s, we recommend ${cardTiers[rec.idealCard].name} for optimal benefits!`;
  html += '</div>';
  
  content.innerHTML = html;
  openModal('compareModal');
}

function showUpgradeOptions() {
  const modal = document.getElementById('upgradeModal');
  const content = document.getElementById('upgradeContent');
  const currentTierIndex = Object.keys(cardTiers).indexOf(currentUser.cardTier);
  
  let html = '<div style="margin-bottom: 20px;"><p style="color: #64748b; line-height: 1.6;">Choose your upgrade path and unlock premium benefits tailored for ' + currentUser.profession + 's!</p></div>';
  
  Object.keys(cardTiers).forEach((tier, index) => {
    if (index > currentTierIndex) {
      const card = cardTiers[tier];
      const profBenefits = card.benefits[currentUser.profession] || card.benefits.general;
      
      html += `
        <div style="padding: 20px; background: linear-gradient(135deg, #f0f4ff, #e8f0fe); border-radius: 12px; margin-bottom: 15px; border: 2px solid ${card.color};">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
            <span style="font-size: 36px;">${card.icon}</span>
            <div>
              <h3 style="color: #1a1f71; margin-bottom: 4px;">${card.name}</h3>
              <p style="font-size: 13px; color: #64748b;">Annual Fee: ‚Çπ${card.annualFee} ‚Ä¢ ${card.rewardsRate}% Rewards</p>
            </div>
          </div>
          <div style="margin: 15px 0;">
            <strong style="color: #1a1f71; font-size: 14px;">Key Benefits for ${currentUser.profession}s:</strong>
            <ul style="margin-top: 8px; padding-left: 20px; color: #64748b; font-size: 13px; line-height: 1.8;">
              ${profBenefits.slice(0, 3).map(b => `<li>${b}</li>`).join('')}
            </ul>
          </div>
          <button class="btn-primary" style="width: 100%;" onclick="applyForUpgrade('${tier}')">
            üöÄ Apply for ${card.name}
          </button>
        </div>
      `;
    }
  });
  
  content.innerHTML = html;
  openModal('upgradeModal');
}

function applyForUpgrade(tier) {
  const card = cardTiers[tier];
  if (confirm(`Apply for ${card.name}?\n\nAnnual Fee: ‚Çπ${card.annualFee}\nRewards Rate: ${card.rewardsRate}%\nCredit Limit: ‚Çπ${card.limit.toLocaleString()}\n\nYour application will be processed within 48 hours.`)) {
    alert(`‚úÖ Application submitted for ${card.name}!\n\nOur team will contact you within 24-48 hours with approval details. You'll receive:\n\n‚Ä¢ Enhanced ${card.rewardsRate}% rewards\n‚Ä¢ Profession-specific benefits\n‚Ä¢ Higher credit limit of ‚Çπ${card.limit.toLocaleString()}\n\nThank you for choosing Visa!`);
    closeModal('upgradeModal');
  }
}

// Navigation
function goToDashboard() {
  document.getElementById('mainDashboard').style.display = 'grid';
  closeModal('transactionModal');
  closeModal('compareModal');
  closeModal('upgradeModal');
}

// Modal functions
function openModal(modalId) {
  document.getElementById(modalId).classList.add('active');
}

function closeModal(modalId) {
  document.getElementById(modalId).classList.remove('active');
}

// Show transaction detail
function showTransactionDetail(id) {
  const tx = transactions[id];
  document.getElementById('transactionIcon').textContent = tx.icon;
  document.getElementById('transactionName').textContent = tx.name;
  document.getElementById('transactionAmountLarge').textContent = 
    (tx.amount < 0 ? '-' : '+') + '‚Çπ' + Math.abs(tx.amount).toLocaleString();
  document.getElementById('transactionAmountLarge').style.color = 
    tx.amount < 0 ? '#dc2626' : '#059669';
  document.getElementById('transactionDateTime').textContent = 
    `${tx.date} at ${tx.time}`;
  document.getElementById('transactionCategory').textContent = tx.category;
  document.getElementById('transactionMerchant').textContent = tx.merchant;
  document.getElementById('transactionLocation').textContent = tx.location;
  document.getElementById('transactionId').textContent = `TXN${id}234567890`;
  
  openModal('transactionModal');
}

// Show benefit detail
function showBenefitDetail(benefitText) {
  alert(`‚ú® ${benefitText}\n\nThis benefit is active and automatically applied to eligible transactions. Check your rewards balance regularly to track your savings!\n\nNeed help? Contact our 24/7 support team.`);
}

// Bill payment
function payBill() {
  const amount = document.getElementById("billAmount").value;
  const billType = document.getElementById("billType");
  
  if (!amount || amount <= 0) {
    alert("Please enter a valid amount");
    return;
  }
  
  const cashback = (amount * 0.05).toFixed(2);
  const notif = document.getElementById("billNotif");
  
  notif.style.display = "block";
  notif.innerHTML = `
    <strong>‚úÖ Payment Successful!</strong><br>
    Amount: ‚Çπ${amount}<br>
    Cashback: ‚Çπ${cashback} (5%)<br>
    Bill: ${billType.options[billType.selectedIndex].text}
  `;
  
  document.getElementById("billAmount").value = "";
  
  setTimeout(() => {
    notif.style.display = "none";
  }, 5000);
}

// Other functions
function showProfile() {
  alert(`Profile:\nName: ${currentUser.name}\nID: ${currentUser.custId}\nProfession: ${currentUser.profession}\nCard: ${cardTiers[currentUser.cardTier].name}`);
}

function logout() {
  if (confirm('Are you sure you want to logout?')) {
    alert('Logged out successfully!');
  }
}

function showTransferMoney() {
  alert('Transfer Money feature - Coming soon!');
}

function showStatements() {
  alert('View Statements feature - Coming soon!');
}

function viewAllOffers() {
  alert('All Offers feature - Coming soon!');
}

function viewOfferDetail(type) {
  alert(`Offer details for: ${type}`);
}

function exploreInvestments() {
  alert('Investment Options - Coming soon!');
}

function blockCard() {
  if (confirm('Are you sure you want to block your card?')) {
    alert('Card blocked successfully! Contact support to unblock.');
  }
}

function reportFraud() {
  alert('Report Fraud - Our team will contact you shortly.');
}

function customerSupport() {
  alert('Calling customer support: 1800-XXX-XXXX');
}

function downloadReceipt() {
  alert('Receipt downloaded successfully!');
}

function reportIssue() {
  alert('Issue reported. Our team will investigate.');
}

function contactSupport() {
  alert('Contacting support...');
}

// Chatbot functions
function toggleChat() {
  const chatWindow = document.getElementById("chatWindow");
  const chatToggle = document.getElementById("chatToggle");
  
  if (chatWindow.classList.contains("open")) {
    chatWindow.classList.remove("open");
    chatToggle.textContent = "ü§ñ";
  } else {
    chatWindow.classList.add("open");
    chatToggle.textContent = "√ó";
  }
}

function openChat() {
  document.getElementById("chatWindow").classList.add("open");
  document.getElementById("chatToggle").textContent = "√ó";
}

function addChatMessage(text, isUser) {
  const chatMessages = document.getElementById("chatMessages");
  const messageDiv = document.createElement("div");
  messageDiv.className = `chat-message ${isUser ? 'user' : 'bot'}`;
  messageDiv.innerHTML = `<div class="message-bubble">${text}</div>`;
  chatMessages.appendChild(messageDiv);
  chatMessages.scrollTop = chatMessages.scrollHeight;
}

function showTyping() {
  const chatMessages = document.getElementById("chatMessages");
  const typingDiv = document.createElement("div");
  typingDiv.className = "chat-message bot";
  typingDiv.id = "typingIndicator";
  typingDiv.innerHTML = `
    <div class="message-bubble">
      <div class="typing-indicator">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  `;
  chatMessages.appendChild(typingDiv);
  chatMessages.scrollTop = chatMessages.scrollHeight;
}

function removeTyping() {
  const typing = document.getElementById("typingIndicator");
  if (typing) typing.remove();
}

function askQuestion(question) {
  document.getElementById('chatInput').value = question;
  sendChatMessage();
}

async function getAIResponse(message) {
  const currentCard = cardTiers[currentUser.cardTier];
  const profBenefits = currentCard.benefits[currentUser.profession] || currentCard.benefits.general;
  const recommendation = professionRecommendations[currentUser.profession];
  
  const context = `You are a helpful Visa banking assistant. User: ${currentUser.name}, ID: ${currentUser.custId}, Profession: ${currentUser.profession}.
  
User Info:
- Balance: ‚Çπ${currentUser.balance}
- Rewards: ‚Çπ${currentUser.rewards}
- Current Card: ${currentCard.name} (${currentCard.rewardsRate}% rewards)
- Monthly Spend: ‚Çπ${currentUser.monthlySpend}
- Active Benefits for ${currentUser.profession}: ${profBenefits.join(', ')}
- Recommended Card: ${cardTiers[recommendation.idealCard].name}

Card Tiers Available: Student (0% fee), Classic (‚Çπ500), Premium (‚Çπ2500), Platinum (‚Çπ5000), Signature (‚Çπ10000)

Respond in a friendly, helpful manner. Keep responses concise (under 80 words). Focus on profession-specific benefits and upgrade opportunities when relevant.`;

  try {
    const response = await fetch("https://api.anthropic.com/v1/messages", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        model: "claude-sonnet-4-20250514",
        max_tokens: 800,
        messages: [
          { role: "user", content: context },
          { role: "assistant", content: "I understand. I'll help with Visa banking services focusing on profession-specific benefits." },
          { role: "user", content: message }
        ]
      })
    });

    const data = await response.json();
    return data.content[0].text;
  } catch (error) {
    console.error("AI Error:", error);
    
    const msg = message.toLowerCase();
    if (msg.includes("benefit")) {
      return `As a ${currentUser.profession}, you have exclusive benefits: ${profBenefits.slice(0, 3).join(', ')}. Your ${currentCard.name} is designed for professionals like you!`;
    } else if (msg.includes("upgrade") || msg.includes("better card")) {
      const recCard = cardTiers[recommendation.upgradeCard];
      return `Based on your ‚Çπ${currentUser.monthlySpend.toLocaleString()} monthly spend, consider upgrading to ${recCard.name} for ${recCard.rewardsRate}% rewards and enhanced ${currentUser.profession} benefits!`;
    } else if (msg.includes("balance") || msg.includes("account")) {
      return `Balance: ‚Çπ${currentUser.balance.toLocaleString()}, Rewards: ‚Çπ${currentUser.rewards.toLocaleString()}. Your ${currentCard.name} earns ${currentCard.rewardsRate}% on all purchases!`;
    } else if (msg.includes("profession") || msg.includes("job")) {
      return `As a ${currentUser.profession}, you get special benefits like ${profBenefits[0]}. Want to see all profession-specific perks?`;
    } else if (msg.includes("recommend") || msg.includes("suggest")) {
      return `For ${currentUser.profession}s with your spending pattern, ${cardTiers[recommendation.idealCard].name} offers the best value with ${cardTiers[recommendation.idealCard].rewardsRate}% rewards!`;
    } else {
      return `I'm here to help! Ask about your ${currentUser.profession}-specific benefits, card upgrades, spending insights, or profession-based recommendations. What interests you?`;
    }
  }
}

async function sendChatMessage() {
  const input = document.getElementById("chatInput");
  const message = input.value.trim();
  
  if (!message) return;
  
  addChatMessage(message, true);
  input.value = "";
  
  showTyping();
  
  const response = await getAIResponse(message);
  
  removeTyping();
  addChatMessage(response, false);
}

window.onclick = function(event) {
  if (event.target.classList.contains('modal')) {
    event.target.classList.remove('active');
  }
}
</script>

</body>
</html>